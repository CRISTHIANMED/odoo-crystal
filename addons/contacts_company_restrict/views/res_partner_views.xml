<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Heredar la vista base.view_partner_form (res.partner.form)
       Insertar company_id justo despuÃ©s de 'category_id' (Etiquetas) -->
  <record id="view_partner_form_inherit_company_after_tags" model="ir.ui.view">
    <field name="name">res.partner.form.company.after.tags</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">

      <!-- Agregar campo Empresa debajo de Etiquetas -->
      <xpath expr="//sheet//field[@name='category_id']" position="after">
            <field name="company_id"
                  string="Empresa"
                  required="1"
                  options="{'no_create': True, 'no_open': True}"
                  force_save="1"/>
      </xpath>

      <!-- (Opcional recomendado) Ocultar la versiÃ³n de company_id que
           aparece en la pestaÃ±a Sales & Purchase > Misc para evitar duplicado visual -->
      <xpath expr="//page[@name='sales_purchases']//group[@name='misc']/field[@name='company_id'][1]" position="attributes">
        <attribute name="invisible">1</attribute>
      </xpath>

    </field>
  </record>
</odoo>
